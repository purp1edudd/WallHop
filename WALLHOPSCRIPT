local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local cheatEnabled = false       -- Флаг, включён ли чит
local canJumpSpin = true         -- Флаг, разрешающий поворот при прыжке

-- Функция переключения чита по клавише M
local function toggleCheat()
    cheatEnabled = not cheatEnabled
    print("Cheat enabled:", cheatEnabled)
end

-- Переключаем чит при нажатии M
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.M then
        toggleCheat()
    end
end)

-- Обработка прыжка с задержкой и поворотом
UserInputService.JumpRequest:Connect(function()
    if cheatEnabled and canJumpSpin then
        local character = player.Character
        if not character then return end
        
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoid and rootPart then
            canJumpSpin = false
            
            -- Запускаем прыжок
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            
            -- Поворачиваем влево (около -57 градусов)
            rootPart.CFrame = rootPart.CFrame * CFrame.Angles(0, -1, 0)
            
            wait(0.2)  -- Задержка после приземления
            
            -- Поворачиваем обратно вправо
            rootPart.CFrame = rootPart.CFrame * CFrame.Angles(0, 1, 0)
            
            canJumpSpin = true
        end
    end
end)
